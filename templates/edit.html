{% extends "base.html" %}
{% block content %}
<div class="container-main">
    <h1 class="page-title">Edit Post</h1>
    <form method="POST" action="{{ url_for('edit_post', post_id=post.id) }}" enctype="multipart/form-data" class="post-form">
        <div class="form-group">
            <label for="title" class="form-label">Title</label>
            <input type="text" id="title" name="title" required class="form-input" value="{{ post.title }}" placeholder="A catchy title for your blog post">
        </div>
        <div class="form-group">
            <label class="form-label">Current Header Image</label>
            <img 
                src="{{ url_for('static', filename=post.image_file) }}" 
                alt="Current Post Image" 
                class="post-image-thumbnail">
        </div>
        <div class="form-group">
            <label for="image_file" class="form-label">Change Image (Optional)</label>
            <input type="file" id="image_file" name="image_file" accept="image/*" class="form-file-input">
            <p class="file-help-text">Selecting a new image will replace the current one.</p>
        </div>
        {% if post.image_file != 'img/default_post_bg.png' %}
        <div class="form-group form-checkbox-group">
            <input type="checkbox" id="remove_picture" name="remove_picture" value="true">
            <label for="remove_picture" class="form-label form-checkbox-label">Remove current image and use default</label>
        </div>
        {% endif %}
        <div class="form-group">
            <label for="content" class="form-label">Content</label>
            <textarea id="content" name="content" rows="12" required class="form-input form-textarea" placeholder="Start writing your amazing content here...">{{ post.content }}</textarea>
        </div>
        <button type="submit" class="btn btn-dark btn-submit">
            Update Post
        </button>
    </form>
    <form method="POST" action="{{ url_for('delete_post', post_id=post.id) }}" class="post-delete-form">
        <button type="submit" class="btn btn-danger btn-submit" onclick="return confirm('Are you sure you want to permanently delete this post? This action cannot be undone.');">
            Delete Post
        </button>
    </form>
</div>
{% endblock %}